{% include "navbar.html" %}
{% load static %}
<style>
#search_input{

width:40vw;
height:8vh;
border-radius:20px;
padding:20px;
outline:none;
color:white;
border:3px solid white;

padding-left:50px;
background:none;
}
.search_div{
display:inline-flex;
position:fixed;
z-index:3;
left:28vw;
top:1vh;
}
.icon_st{
margin-right:-35px;
color:white;
margin-top:3vh;
z-index:4;
transform:scale(1);
}
.container_mb{
width:65vw;
height:100%;


}
.prod{

width:45vw;
height:32vh;
background:rgba(255,255,255,0.05);
border-radius:10px;
padding:15px;
display:flex;

color:white;
margin-top:5vh;
text-decoration:none;
}
.busi{
width:20vw;
height:40vh;
background:rgba(255,255,255,0.05);
border-radius:10px;
padding:15px;
display:block;
color:white;
margin-top:5vh;
text-decoration:none;
}
img{
width:10vw;
height:30vh;

}
.p_prod{

color:white;
font-size:1.1rem;
margin-top:2vh;
}
.v_prod{
color:white;
font-size:1rem;
margin-top:2vh;
}
.div_sec{
width:15vw;
height:30vh;
padding:10px;
}
.price_sec{
width:10vw;
height:20vh;
display:block;
}
.tit_sec{
font-size:1.2rem;
letter-spacing:2px;
margin-bottom:4vh;
}
.cate_sec{
letter-spacing:2px;
margin-bottom:6vh;
}
.rate_sec{
letter-spacing:3px;

}
.pri_sec{
font-size:2rem;
}
.busi_sec{
margin-top:3vh;
color:grey;
font-size:0.7rem;
}
</style>
<div class="mainbody">
<form class="search_div">{% csrf_token %}
<div class="icon_st"><i class="fa-solid fa-magnifying-glass"></i></div>
<input type="text" placeholder = "What are you looking for......" name="search_item" id="search_input">


</form>
<script>
var searchInput = document.getElementById("search_input");
searchInput.addEventListener("input", function(e) {
    e.preventDefault();
	var container_prod = document.getElementsByClassName("container_mb")[0];
container_prod.innerHTML = "";
    var inputValue = event.target.value;
    $.ajax({
	url:"{% url 'searchbar' %}",
    method:"POST",	
	data:{
	"csrfmiddlewaretoken":"{{csrf_token}}",
	"query_string":inputValue,
	
	},
	success: function(response) {
    var lengthed = response.prod.length;
	var leng = response.busi.length;
    var container_prod = document.getElementsByClassName("container_mb")[0];
	console.log(response , lengthed);
    for (var i = 0; i < lengthed; i++) {
        // Extract product details
        var token = response.prod[i][0];
        var productName = response.prod[i][1];
        var views = response.prod[i][2];
        var imageUrl = response.prod[i][3];

        // Create a new 'a' element
        var aTag = document.createElement('a');
        aTag.className = 'prod';
        aTag.href = '#';  // Update this if you have a URL to link to

        // Create a new 'img' element
        var imgTag = document.createElement('img');
        imgTag.src = imageUrl;
        imgTag.alt = productName;  // Optional: Adding alt text

        // Create a new 'p' element
        var pTag = document.createElement('p');
		pTag.className = "p_prod";
        pTag.textContent = productName;
		

        // Append 'img' and 'p' to the 'a' element
        aTag.appendChild(imgTag);
        
		
aTag.appendChild(pTag);

        // Append 'a' to the container
        container_prod.appendChild(aTag);
    };
	 for (var i = 0; i < leng; i++) {
        // Extract product details
        var token = response.busi[i][0];
        var productName = response.busi[i][1];
        var views = response.busi[i][2];
        var imageUrl = response.busi[i][3];

        // Create a new 'a' element
        var aTag = document.createElement('a');
        aTag.className = 'busi';
        aTag.href = '#';  // Update this if you have a URL to link to

        // Create a new 'img' element
        var imgTag = document.createElement('img');
        imgTag.src = imageUrl;
        imgTag.alt = productName;  // Optional: Adding alt text

        // Create a new 'p' element
        var pTag = document.createElement('p');
		pTag.className = "p_prod"
        pTag.textContent = productName;

        // Append 'img' and 'p' to the 'a' element
        aTag.appendChild(imgTag);
        aTag.appendChild(pTag);

        // Append 'a' to the container
        container_prod.appendChild(aTag);
    }
	
},

	
	
});

});
</script>



<div class="mainbody">
<p style="font-size:1.4rem;">Top Results</p>
<br>
<div class="container_mb">
<a class="prod">

<img src="">
<div class="div_sec">
<p class="tit_sec">Title</p>
<p class="cate_sec">Category</p>

<p class="rate_sec">Ratings</p>
<p class="busi_sec">From Business</p>
</div>

<section class="price_sec">
<p class="pri_sec">Price</p>

</section>

</a>


</div>








</div>
</div>